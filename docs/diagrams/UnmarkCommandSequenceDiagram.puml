@startuml
!include style.puml

title UnmarkCommand\n

box "Logic" #00000000
participant ":LogicManager" as LogicManager LOGIC_COLOR
participant ":AddressBookParser" as AddressBookParser LOGIC_COLOR
participant ":UnmarkCommandParser" as UnmarkCommandParser LOGIC_COLOR
participant "command:UnmarkCommand" as UnmarkCommand LOGIC_COLOR
participant "result:CommandResult" as CommandResult LOGIC_COLOR
participant "studentId:StudentId" as StudentId LOGIC_COLOR
participant "index:Index" as Index LOGIC_COLOR
end box

box "Model" #FFFFFF
Participant "model:Model" as Model MODEL_COLOR
end box

[-> LogicManager : execute
activate LogicManager LOGIC_COLOR

LogicManager -> AddressBookParser : parseCommand(commandText)
activate AddressBookParser LOGIC_COLOR

create UnmarkCommandParser
AddressBookParser -> UnmarkCommandParser
activate UnmarkCommandParser LOGIC_COLOR
UnmarkCommandParser -> AddressBookParser
deactivate UnmarkCommandParser

AddressBookParser -> UnmarkCommandParser : parse(arguments)
activate UnmarkCommandParser LOGIC_COLOR

create StudentId
UnmarkCommandParser -> StudentId ++ LOGIC_COLOR: argMultiMap
StudentId --> UnmarkCommandParser --:

create Index
UnmarkCommandParser -> Index ++ LOGIC_COLOR: argMultiMap
Index --> UnmarkCommandParser --:

create UnmarkCommand
UnmarkCommandParser -> UnmarkCommand ++ LOGIC_COLOR: studentId, index

UnmarkCommand --> UnmarkCommandParser --:
deactivate UnmarkCommand

UnmarkCommandParser --> AddressBookParser --:
deactivate UnmarkCommandParser

AddressBookParser --> LogicManager --:
deactivate AddressBookParser

LogicManager -> UnmarkCommand ++ LOGIC_COLOR : execute(model)
activate UnmarkCommand LOGIC_COLOR

UnmarkCommand -> Model ++ MODEL_COLOR: unmarkTaskOfPerson(studentId, index)

loop all person
    Model -> StudentId ++ LOGIC_COLOR: unmarkTaskOfPerson(studentId, index)
    StudentId --> Model --
end

Model --> UnmarkCommand --

create CommandResult
UnmarkCommand --> CommandResult ++ LOGIC_COLOR:

CommandResult --> UnmarkCommand --:
deactivate CommandResult

UnmarkCommand --> LogicManager --: result:CommandResult
deactivate UnmarkCommand

[<--LogicManager --: result:CommandResult
deactivate LogicManager

@enduml
